@model SpeedwayCenter.ViewModels.Meeting.MatchDetalisViewModel

@{
    ViewBag.Title = "Details";
    var homeTeamPoints = 0;
    var awayTeamPoints = 0;
}
<div class="col-xs-6">
    <h1>@Model.HomeTeam: @Model.HomeTeamPoints</h1>
    <table class="table table-bordered table-condensed">
        <thead>
            <tr>
                <th>Nr</th>
                <th>Rider</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>Suma</th>
            </tr>
        </thead>
        <tbody>
            @for (var i = 0; i < 7; ++i)
            {
                <tr>
                    <td>@(i + 9)</td>
                    <td>@Model.HomeTeamRiders[i].Name</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 1 ? "" : Model.HomeTeamRiders[i].Score[0].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 3 ? "" : Model.HomeTeamRiders[i].Score[2].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 5 ? "" : Model.HomeTeamRiders[i].Score[4].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 7 ? "" : Model.HomeTeamRiders[i].Score[6].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 9 ? "" : Model.HomeTeamRiders[i].Score[8].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 11 ? "" : Model.HomeTeamRiders[i].Score[10].ToString())</td>
                    <td>@(Model.HomeTeamRiders[i].Score.Length < 13 ? "" : Model.HomeTeamRiders[i].Score[12].ToString())</td>
                    <td>@Model.HomeTeamRiders[i].Total</td>
                </tr>
            }
        </tbody>
    </table>
    <h1>@Model.AwayTeam: @Model.AwayTeamPoints</h1>
    <table class="table table-bordered table-condensed">
        <thead>
            <tr>
                <th>Nr</th>
                <th>Rider</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>Suma</th>
            </tr>
        </thead>
        <tbody>
            @for (var i = 0; i < 7; ++i)
            {
                <tr>
                    <td>@(i + 1)</td>
                    <td>@Model.AwayTeamRiders[i].Name</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 1 ? "" : Model.AwayTeamRiders[i].Score[0].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 3 ? "" : Model.AwayTeamRiders[i].Score[2].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 5 ? "" : Model.AwayTeamRiders[i].Score[4].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 7 ? "" : Model.AwayTeamRiders[i].Score[6].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 9 ? "" : Model.AwayTeamRiders[i].Score[8].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 11 ? "" : Model.AwayTeamRiders[i].Score[10].ToString())</td>
                    <td>@(Model.AwayTeamRiders[i].Score.Length < 13 ? "" : Model.AwayTeamRiders[i].Score[12].ToString())</td>
                    <td>@Model.AwayTeamRiders[i].Total</td>
                </tr>
            }
        </tbody>
    </table>
    <table class="table table-bordered table-condensed table-striped">

        @for (var i = 0; i < 15; ++i)
        {
            <tr>
                <td rowspan="4">@(i + 1)</td>
                <td>@Model.Heats[i].GateA.Name</td>
                <td>@Model.Heats[i].GateA.Score</td>
                <td rowspan="2">
                    <h4 class="text-center text-muted">
                        @(Model.HomeACGates.Contains(i + 1) ?
                              Model.Heats[i].GateA.Score + Model.Heats[i].GateC.Score :
                              Model.Heats[i].GateB.Score + Model.Heats[i].GateD.Score)
                    </h4>
                </td>
                <td rowspan="2">
                    <h4 class="text-center text-muted">
                        @(!Model.HomeACGates.Contains(i + 1) ?
                          Model.Heats[i].GateA.Score + Model.Heats[i].GateC.Score :
                          Model.Heats[i].GateB.Score + Model.Heats[i].GateD.Score)
                    </h4>
                </td>
            </tr>
            <tr>
                <td>@Model.Heats[i].GateB.Name</td>
                <td>@Model.Heats[i].GateB.Score</td>
            </tr>
            <tr>
                <td>@Model.Heats[i].GateC.Name</td>
                <td>@Model.Heats[i].GateD.Score</td>
                <td rowspan="2">
                    <h4 class="text-center">
                        @(Model.HomeACGates.Contains(i + 1) ?
                          homeTeamPoints += Model.Heats[i].GateA.Score + Model.Heats[i].GateC.Score :
                          homeTeamPoints += Model.Heats[i].GateB.Score + Model.Heats[i].GateD.Score)
                    </h4>
                </td>
                <td rowspan="2">
                    <h4 class="text-center">
                        @(!Model.HomeACGates.Contains(i + 1) ?
                          awayTeamPoints += Model.Heats[i].GateA.Score + Model.Heats[i].GateC.Score :
                          awayTeamPoints += Model.Heats[i].GateB.Score + Model.Heats[i].GateD.Score)
                    </h4>
                </td>
            </tr>
            <tr>
                <td>@Model.Heats[i].GateD.Name</td>
                <td>@Model.Heats[i].GateD.Score</td>
            </tr>
        }
    </table>
</div>